<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>House Points - Teacher Input</title>
<link rel="icon" type="image/x-icon" href="teacher-favicon.ico">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: url("stone.png") center/cover no-repeat fixed;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
    color: white;
}

.container {
    width: 100%;
    max-width: 600px;
}

h1 {
    text-align: center;
    margin-bottom: 6px;
    font-size: 32px;
    letter-spacing: 1px;
    text-shadow: 0 0 8px black;
}

.subtitle {
    text-align: center;
    margin-bottom: 20px;
    font-size: 15px;
    opacity: 0.9;
    text-shadow: 0 0 8px black;
}

.card {
    background: rgba(60,60,60,0.92);
    color: white;
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 18px;
    box-shadow: 0 10px 35px rgba(0,0,0,0.45);
    backdrop-filter: blur(3px);
}

.card h2 {
    font-size: 19px;
    margin-bottom: 10px;
}

input {
    width: 100%;
    padding: 12px;
    margin-top: 6px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
}

/* ---- HOUSE 2√ó2 GRID ---- */
.house-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-top: 8px;
}

.house-btn {
    position: relative;
    height: 180px;
    border-radius: 18px;
    background: #2b2b2b;
    border: none;
    cursor: pointer;
    overflow: hidden;
    padding: 0;
    transition: 0.25s ease;
    display: flex;
    justify-content: center;
    align-items: center;
}

.house-btn img {
    width: 85%;
    max-height: 140px;
    object-fit: contain;
    object-position: top;
    transform: translateY(-10px);
    pointer-events: none;
}

.house-btn:hover {
    box-shadow: 0 0 20px rgba(255,140,0,0.9);
    transform: scale(1.04);
}

.house-btn.selected {
    box-shadow: 0 0 28px rgba(255,140,0,1);
    transform: scale(1.06);
}

/* ---- CATEGORY BUTTONS ---- */
.category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 10px;
    margin-top: 10px;
}

.category-btn {
    padding: 12px;
    border-radius: 12px;
    background: #555;
    color: white;
    cursor: pointer;
    transition: 0.15s;
    font-size: 15px;
}

.category-btn:hover {
    background: #777;
    transform: translateY(-1px);
}

.category-btn.selected {
    background: #00c3ff;
    color: black;
    font-weight: bold;
}

/* ---- SUBMIT BUTTON ---- */
#submitBtn {
    width: 100%;
    padding: 16px;
    background: #00c3ff;
    border: none;
    border-radius: 14px;
    font-size: 20px;
    color: black;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
}

#submitBtn:hover {
    background: #41d9ff;
}

.footer-note {
    text-align: center;
    margin-top: 10px;
    font-size: 13px;
    opacity: 0.85;
    text-shadow: 0 0 8px black;
}

.status-message {
    text-align: center;
    margin-top: 10px;
    font-size: 14px;
    min-height: 20px;
}

.status-success { color: #7CFC7C; }
.status-error   { color: #ffb3b3; }
</style>
</head>

<body>
<div class="container">
<h1>House Points</h1>
<p class="subtitle">Award 1 point for positive behaviour</p>

<!-- TEACHER INPUT -->
<div class="card">
    <h2>Your Name or Email</h2>
    <input id="teacherInput" type="text" placeholder="Enter your name or school email">
</div>

<!-- HOUSE SELECTION -->
<div class="card">
<h2>Select House</h2>
<div class="house-grid">

<button class="house-btn" data-house="Phoenix">
    <img src="phoenix2-removebg.png" alt="Phoenix">
</button>

<button class="house-btn" data-house="Dragon">
    <img src="dragon2-removebg.png" alt="Dragon">
</button>

<button class="house-btn" data-house="Hydra">
    <img src="hydra2-removebg.png" alt="Hydra">
</button>

<button class="house-btn" data-house="Griffin">
    <img src="griffin2-removebg.png" alt="Griffin">
</button>

</div>
</div>

<!-- CATEGORY SELECTION -->
<div class="card">
<h2>Select Category</h2>

<div class="category-grid">
<div class="category-btn" data-category="Kindness/Helping Others">‚ù§Ô∏è Kindness/Helping Others</div>
<div class="category-btn" data-category="Academic Effort/Excellence">üìö Academic Effort/Excellence</div>
<div class="category-btn" data-category="Teamwork/Collaboration">ü§ù Teamwork/Collaboration</div>
<div class="category-btn" data-category="Respect">üôè Respect</div>
<div class="category-btn" data-category="Leadership">‚≠ê Leadership</div>
<div class="category-btn" data-category="Creativity/Problem Solving">üí° Creativity/Problem Solving</div>
<div class="category-btn" data-category="Responsibility">‚úÖ Responsibility</div>
</div>
</div>

<!-- SUBMIT -->
<button id="submitBtn">Award 1 Point</button>

<p class="footer-note">multiple points can be awarded upon special request</p>
<div id="status" class="status-message"></div>

</div>

<script>
const APPS_SCRIPT_URL = 
"https://script.google.com/macros/s/AKfycbyZkszKyoadMXT4fXahoNm3hqn6wj_pBscUjt0bt2gHOSnLaFyTJGEn9032liVRaqH3lQ/exec";

let currentHouse = "";
let currentCategory = "";

/* ---- HOUSE BUTTON LOGIC ---- */
const houseButtons = [...document.querySelectorAll(".house-btn")];
houseButtons.forEach(btn => {
    btn.addEventListener("click", () => {
        houseButtons.forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");
        currentHouse = btn.dataset.house;
    });
});

/* ---- CATEGORY BUTTON LOGIC ---- */
const categoryButtons = [...document.querySelectorAll(".category-btn")];
categoryButtons.forEach(btn => {
    btn.addEventListener("click", () => {
        categoryButtons.forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");
        currentCategory = btn.dataset.category;
    });
});

/* ---- STATUS ---- */
function setStatus(msg, error = false) {
    const el = document.getElementById("status");
    el.textContent = msg;
    el.classList.remove("status-success", "status-error");
    el.classList.add(error ? "status-error" : "status-success");
}

/* ---- SUBMIT ---- */
document.getElementById("submitBtn").addEventListener("click", () => {

    const teacher = document.getElementById("teacherInput").value.trim();

    if (!teacher) return setStatus("Enter your name or email.", true);
    if (!currentHouse) return setStatus("Select a house.", true);
    if (!currentCategory) return setStatus("Select a category.", true);

    const payload = {
        action: "points",          // ‚úÖ REQUIRED BY YOUR BACKEND
        source: "teacher-form",
        teacher,
        house: currentHouse,
        category: currentCategory,
        points: 1
    };

    setStatus("Submitting‚Ä¶");

    fetch(APPS_SCRIPT_URL, {
        method: "POST",
        body: JSON.stringify(payload)
    })
    .then(r => r.json().catch(() => null))
    .then(data => {

        if (!data || data.status === "error") {
            return setStatus("‚úó Error sending. Try again.", true);
        }

        // SUCCESS
        setStatus("‚úì Point awarded!");

        // Reset selections
        houseButtons.forEach(b => b.classList.remove("selected"));
        categoryButtons.forEach(b => b.classList.remove("selected"));

        currentHouse = "";
        currentCategory = "";
    })
    .catch(() => setStatus("‚úó Network error.", true));
});
</script>

</body>
</html>
